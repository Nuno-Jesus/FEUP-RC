[1mdiff --git a/lab2/alarm.c b/lab2/alarm.c[m
[1mindex ccfdd2a..902bfa3 100644[m
[1m--- a/lab2/alarm.c[m
[1m+++ b/lab2/alarm.c[m
[36m@@ -26,5 +26,16 @@[m [mvoid set_alarm(Alarm *alarm)[m
 void start_alarm(Alarm *a)[m
 {[m
 	alarm(a->timeout);[m
[32m+[m	[32m#ifdef DEBUG[m
[32m+[m		[32mprintf("Started alarm with %lu seconds\n", a->timeout);[m
[32m+[m	[32m#endif[m
 	a->isActive = TRUE;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvoid stop_alarm()[m
[32m+[m[32m{[m
[32m+[m	[32malarm(0);[m
[32m+[m	[32m#ifdef DEBUG[m
[32m+[m		[32mprintf("Alarm stoped.\n");[m
[32m+[m	[32m#endif[m
 }[m
\ No newline at end of file[m
[1mdiff --git a/lab2/alarm.h b/lab2/alarm.h[m
[1mindex 149d7fc..97373b0 100644[m
[1m--- a/lab2/alarm.h[m
[1m+++ b/lab2/alarm.h[m
[36m@@ -19,4 +19,6 @@[m [mvoid set_alarm(Alarm *);[m
 [m
 void start_alarm(Alarm *);[m
 [m
[32m+[m[32mvoid stop_alarm();[m
[32m+[m
 #endif[m
\ No newline at end of file[m
[1mdiff --git a/lab2/macros.h b/lab2/macros.h[m
[1mindex e21745e..d6b37b2 100644[m
[1m--- a/lab2/macros.h[m
[1m+++ b/lab2/macros.h[m
[36m@@ -12,6 +12,8 @@[m
 #include <sys/types.h>[m
 #include <sys/stat.h>[m
 [m
[32m+[m[32m//#define DEBUG[m[41m[m
[32m+[m[41m[m
 #define FLAG 0x7E[m
 #define ADDRESS 0x03[m
 #define CONTROL_SET 0x03[m
[1mdiff --git a/lab2/protocol.c b/lab2/protocol.c[m
[1mindex fbab40e..668b5da 100644[m
[1m--- a/lab2/protocol.c[m
[1m+++ b/lab2/protocol.c[m
[36m@@ -105,7 +105,10 @@[m [mint send_set_frame()[m
 [m
 	bytes = write(port->fd, setFrame, 5);[m
 	free(setFrame);[m
[31m-[m
[32m+[m[41m	[m
[32m+[m	[32mbytes >= 0[m[41m [m
[32m+[m		[32m? printf("Sending SET frame\n")[m[41m [m
[32m+[m		[32m: printf("Couldn't send the SET frame\n");[m[41m[m
 	return bytes;[m
 }[m
 [m
[36m@@ -131,7 +134,11 @@[m [mint receive_set_frame()[m
 void alarm_handler(int signal)[m
 {[m
 	a->isActive = FALSE;[m
[32m+[m	[32m#ifdef DEBUG[m[41m[m
[32m+[m		[32mprintf("Alarm #%lu triggered.\n", a->counter);[m[41m[m
[32m+[m	[32m#endif[m[41m[m
 	a->counter++;[m
[32m+[m[41m[m
 }[m
 [m
 /**[m
[36m@@ -157,6 +164,7 @@[m [mint llopen_transmitter()[m
         {[m
             start_alarm(a);[m
 			//WAS HERE[m
[32m+[m			[32mstop_alarm();[m[41m[m
         }[m
     }[m
 [m
[36m@@ -171,7 +179,7 @@[m [mint llopen_transmitter()[m
 	 * When reaching ATTEMPTS, return -1;[m
 	 */[m
 [m
[31m-[m
[32m+[m	[32mreturn 0;[m[41m[m
 }[m
 [m
 int llopen_receiver()[m
[36m@@ -195,6 +203,14 @@[m [mint llopen(const char *port, Device device)[m
 	return fd;[m
 }[m
 [m
[32m+[m[32m/**[m[41m[m
[32m+[m[32m * @brief[m[41m [m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * 1 - Send the DISC frame to the receiver[m[41m[m
[32m+[m[32m * 2 - Read the DISC frame from the receiver[m[41m [m
[32m+[m[32m * 3 - Send the UA frame to the receiver[m[41m[m
[32m+[m[32m * 4 - Reset the port configurations[m[41m[m
[32m+[m[32m */[m[41m[m
 int llclose(int fd)[m
 {[m
 	return canonical_close(fd);[m
[1mdiff --git a/lab2/protocol.h b/lab2/protocol.h[m
[1mindex a6970c3..f136d66 100644[m
[1m--- a/lab2/protocol.h[m
[1m+++ b/lab2/protocol.h[m
[36m@@ -12,15 +12,15 @@[m [mtypedef struct port_t[m
 	struct termios newtio;[m
 } PortInfo;[m
 [m
[31m-PortInfo *new_port(const char *);[m
[32m+[m[32mPortInfo *new_port(const char *, int);[m[41m[m
 [m
 void delete_port(PortInfo *);[m
 [m
[31m-int llopen(const char *, Device );[m
[32m+[m[32mint llopen(const char *, Device);[m[41m[m
 [m
[31m-int llclose(int );[m
[32m+[m[32mint llclose(int);[m[41m[m
 [m
[31m-int llwrite(int , char *, int );[m
[32m+[m[32mint llwrite(int , char *, int);[m[41m[m
 [m
 int llread(int , char *);[m
 [m
[1mdiff --git a/lab2/utils.c b/lab2/utils.c[m
[1mindex 738e9f8..6440a18 100644[m
[1m--- a/lab2/utils.c[m
[1m+++ b/lab2/utils.c[m
[36m@@ -14,3 +14,10 @@[m [mvoid print_error(char *message)[m
 	perror(message);[m
 	exit(-1);[m
 }[m
[32m+[m[41m[m
[32m+[m[32mvoid print_frame(unsigned char *data, size_t n)[m[41m[m
[32m+[m[32m{[m[41m[m
[32m+[m	[32mfor(size_t i = 0; i < n; i++)[m[41m[m
[32m+[m		[32mprintf("0x%x ", data[i]);[m[41m[m
[32m+[m	[32mprintf("\n");[m[41m[m
[32m+[m[32m}[m[41m[m
[1mdiff --git a/lab2/utils.h b/lab2/utils.h[m
[1mindex de40778..cbdcd32 100644[m
[1m--- a/lab2/utils.h[m
[1m+++ b/lab2/utils.h[m
[36m@@ -1,6 +1,8 @@[m
 #ifndef UTILS_H[m
 #define UTILS_H[m
 [m
[32m+[m[32m#include "macros.h"[m[41m[m
[32m+[m[41m[m
 void print_usage(char *);[m
 [m
 void print_error(char *);[m
